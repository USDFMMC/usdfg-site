<!DOCTYPE html>
<html>
<head>
    <title>Phantom Manifest Test</title>
    <meta charset="utf-8">
</head>
<body>
    <h1>Phantom Manifest.json Test</h1>
    <p>This page helps verify that Phantom can access the manifest.json file.</p>
    
    <h2>Test 1: Fetch Manifest.json</h2>
    <button onclick="testManifest()">Test Manifest Fetch</button>
    <pre id="manifest-result"></pre>
    
    <h2>Test 2: Check CORS Headers</h2>
    <button onclick="testCORS()">Test CORS Headers</button>
    <pre id="cors-result"></pre>
    
    <h2>Test 3: Verify Icon</h2>
    <button onclick="testIcon()">Test Icon</button>
    <pre id="icon-result"></pre>
    
    <script>
        async function testManifest() {
            const result = document.getElementById('manifest-result');
            try {
                const response = await fetch('https://usdfg.pro/phantom/manifest.json', {
                    method: 'GET',
                    headers: {
                        'Origin': 'phantom://'
                    }
                });
                
                const headers = {};
                response.headers.forEach((value, key) => {
                    headers[key] = value;
                });
                
                const data = await response.json();
                
                result.textContent = JSON.stringify({
                    status: response.status,
                    statusText: response.statusText,
                    headers: headers,
                    data: data,
                    cors: headers['access-control-allow-origin'] || 'MISSING'
                }, null, 2);
            } catch (error) {
                result.textContent = 'Error: ' + error.message;
            }
        }
        
        async function testCORS() {
            const result = document.getElementById('cors-result');
            try {
                const response = await fetch('https://usdfg.pro/phantom/manifest.json', {
                    method: 'OPTIONS',
                    headers: {
                        'Origin': 'phantom://',
                        'Access-Control-Request-Method': 'GET'
                    }
                });
                
                const headers = {};
                response.headers.forEach((value, key) => {
                    headers[key] = value;
                });
                
                result.textContent = JSON.stringify({
                    status: response.status,
                    headers: headers,
                    corsOrigin: headers['access-control-allow-origin'] || 'MISSING',
                    corsMethods: headers['access-control-allow-methods'] || 'MISSING'
                }, null, 2);
            } catch (error) {
                result.textContent = 'Error: ' + error.message;
            }
        }
        
        async function testIcon() {
            const result = document.getElementById('icon-result');
            try {
                const response = await fetch('https://usdfg.pro/assets/usdfg-logo-transparent.png', {
                    method: 'HEAD'
                });
                
                const headers = {};
                response.headers.forEach((value, key) => {
                    headers[key] = value;
                });
                
                result.textContent = JSON.stringify({
                    status: response.status,
                    headers: headers,
                    contentType: headers['content-type'] || 'MISSING'
                }, null, 2);
            } catch (error) {
                result.textContent = 'Error: ' + error.message;
            }
        }
    </script>
</body>
</html>

